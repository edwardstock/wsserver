# vim:set ft=dockerfile:

FROM edwardstock/cpp-dev:deb-jessie-latest
ENV CC /usr/bin/gcc
ENV CXX /usr/bin/g++

RUN apt-get -y install apt-utils;

COPY . /server
ENV USER root

WORKDIR /server
RUN mkdir -p /server/_build
WORKDIR /server/_build
#RUN sh /server/packaging/init_build.sh

RUN cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_OS=debian-jessie
RUN cmake .. -DCMAKE_BUILD_TYPE=Release -DBUILD_OS=debian-jessie
RUN make

RUN ls -lsah /server/_build
RUN make package